# WebP란?
**WebP(Web Picture format)** 는 Google이 2010년에 발표한 차세대 이미지 포맷입니다.
기존 이미지 포맷인 JPEG, PNG, GIF의 장점을 결합하면서 더 작은 파일 크기와 더 많은 기능을 제공합니다.

WebP는 웹을 위한 이미지 최적화 목적에 맞춰 설계되어 **빠른 로딩 속도, 낮은 대역폭 사용, 우수한 품질**을 제공합니다.

## ✅ WebP의 구조와 작동 원리
WebP는 RIFF 컨테이너 포맷을 기반으로 구성되어 있으며, 각각의 기능은 특정한 청크(Chunk)로 구분됩니다.

### 🧱 1. 기본 구조
WebP 파일은 RIFF 형식에 따라 다음과 같이 구성됩니다:

```scss
RIFF Header
 └─ "WEBP" FourCC
     └─ Chunk 1 (예: VP8, VP8L, VP8X)
     └─ Chunk 2 (예: ALPH, ANIM, ICCP, EXIF 등)
     └─ ...
```
- RIFF (Resource Interchange File Format): 비디오/오디오에서도 사용되는 범용 컨테이너 구조입니다.

- FourCC (Four-Character Code): 각 청크의 기능을 정의하는 식별자입니다 (예: VP8 , VP8L, VP8X 등).

- 바이너리 구조
```
[0-3]     'RIFF'               → 파일 서명 (4바이트)
[4-7]     총 파일 크기         → 전체 파일 크기 - 8 (4바이트, little endian)
[8-11]    'WEBP'               → WebP 포맷 식별자 (4바이트)
[12-...]  청크들               → VP8 / VP8L / VP8X 등
```
- 바이너리 형태 예시
```
0000: 52 49 46 46 3A 00 00 00 57 45 42 50 56 50 38 20
0010: 2C 00 00 00 9D 01 2A 00 ...
```
| 오프셋    | 설명                                     |
| ------ | -------------------------------------- |
| `0000` | `'RIFF'` (파일 식별자)                      |
| `0004` | 파일 크기 (0x3A = 58 바이트)                  |
| `0008` | `'WEBP'` (WebP 포맷 식별자)                 |
| `000C` | `'VP8 '` (손실 압축 청크 이름)                 |
| `0010` | `2C 00 00 00` → **VP8 청크 길이 = 44 바이트** |
| `0014` | **VP8 데이터 본문 시작 (이미지 데이터)**            |
|        | 시작 마커: `9D 01 2A` (VP8 magic bytes)    |


### 🧠 2. 핵심 청크 설명
|청크이름|용도|설명|
|--|--|--|
|VP8|	손실 압축 이미지	|VP8 비디오 코덱 기반 (JPEG 대체)|
|VP8L|	무손실 압축 이미지|	특화된 무손실 압축 알고리즘 사용 (PNG 대체)|
|VP8X|	확장 기능|	애니메이션, 투명도 등 추가 기능을 알림|
|ALPH|	투명도 채널|	알파 채널 정보 포함|
|ANIM|	애니메이션 메타데이터|	프레임 수, 루프 등 정보 포함|
|ANMF|	애니메이션 프레임|	각 프레임 이미지와 타이밍 정보|
|ICCP|	색상 프로파일|	색 공간 보존을 위한 ICC 정보|
|EXIF|	사진 메타데이터|	카메라 정보, GPS 등|
|XMP|	확장 메타데이터|	사진 정보, 저작권 등|

### 3. 🎯 WebP의 3가지 압축 방식 요약
|방식	|설명	|대상 포맷 대체|
|-|-|-|
|손실 압축 (VP8)|	블록 기반 인코딩, 변환 후 일부 정보 제거|	JPEG|
|무손실 압축 (VP8L)|	색상 예측, 반복 패턴 인코딩, 해시 기반 압축|	PNG|
|애니메이션 (VP8X + ANIM)|	여러 프레임 포함, 시간 간격 지정 가능|GIF|

### 4. 🧪 WebP 작동 과정 간단 요약
1. 이미지 입력
1. 압축 선택: 손실 or 무손실
1. 청크 구조로 변환 (RIFF + VP8/VP8L/VP8X 등)
1. WebP 파일로 저장
1. 브라우저가 각 청크를 파싱하여 렌더링

## ✅ 장점 요약
- 높은 압축률: JPEG보다 25~34% 작고, PNG보다 26% 작음
- 투명도 지원 (손실+무손실 모두 가능)
- 애니메이션 지원
- 빠른 디코딩 속도: 모바일/웹에서 렌더링 빠름
- 광범위한 브라우저 호환 (크롬, 사파리, 파이어폭스, 엣지 등)

